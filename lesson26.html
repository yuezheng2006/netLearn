<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第 26 讲 | 云中的网络安全：虽然不是土豪，也需要基本安全和保障 | 网络协议学习</title>
    <meta name="description" content="想成为技术牛人？先搞定网络协议">
    <link rel="icon" href="/netLearn/http.png">
  <link rel="manifest" href="/netLearn/manifest.json">
    
    <link rel="preload" href="/netLearn/assets/css/0.styles.b1407e59.css" as="style"><link rel="preload" href="/netLearn/assets/js/app.2914d2f8.js" as="script"><link rel="preload" href="/netLearn/assets/js/22.0ecb65f5.js" as="script"><link rel="prefetch" href="/netLearn/assets/js/1.2dde6845.js"><link rel="prefetch" href="/netLearn/assets/js/2.a4e6a5c5.js"><link rel="prefetch" href="/netLearn/assets/js/3.5c505085.js"><link rel="prefetch" href="/netLearn/assets/js/4.d1c55cea.js"><link rel="prefetch" href="/netLearn/assets/js/5.692adc04.js"><link rel="prefetch" href="/netLearn/assets/js/6.6eb18b6a.js"><link rel="prefetch" href="/netLearn/assets/js/7.a62cab1b.js"><link rel="prefetch" href="/netLearn/assets/js/8.a25bbd73.js"><link rel="prefetch" href="/netLearn/assets/js/9.779528af.js"><link rel="prefetch" href="/netLearn/assets/js/10.26371369.js"><link rel="prefetch" href="/netLearn/assets/js/11.e1058a42.js"><link rel="prefetch" href="/netLearn/assets/js/12.5b23976f.js"><link rel="prefetch" href="/netLearn/assets/js/13.40dd83ea.js"><link rel="prefetch" href="/netLearn/assets/js/14.07741444.js"><link rel="prefetch" href="/netLearn/assets/js/15.f60494a5.js"><link rel="prefetch" href="/netLearn/assets/js/16.f108ef2b.js"><link rel="prefetch" href="/netLearn/assets/js/17.a42a2cbd.js"><link rel="prefetch" href="/netLearn/assets/js/18.80fa4fa1.js"><link rel="prefetch" href="/netLearn/assets/js/19.cc5759a4.js"><link rel="prefetch" href="/netLearn/assets/js/20.586fd498.js"><link rel="prefetch" href="/netLearn/assets/js/21.d42138c5.js"><link rel="prefetch" href="/netLearn/assets/js/23.df13818e.js"><link rel="prefetch" href="/netLearn/assets/js/24.0e52a71a.js"><link rel="prefetch" href="/netLearn/assets/js/25.f4a9d0cc.js"><link rel="prefetch" href="/netLearn/assets/js/26.404f384a.js"><link rel="prefetch" href="/netLearn/assets/js/27.a863d69a.js"><link rel="prefetch" href="/netLearn/assets/js/28.d7cc877b.js"><link rel="prefetch" href="/netLearn/assets/js/29.b47ecaa2.js"><link rel="prefetch" href="/netLearn/assets/js/30.f727453f.js"><link rel="prefetch" href="/netLearn/assets/js/31.e9226cac.js"><link rel="prefetch" href="/netLearn/assets/js/32.c4045b97.js"><link rel="prefetch" href="/netLearn/assets/js/33.54de50f3.js"><link rel="prefetch" href="/netLearn/assets/js/34.c22e8566.js"><link rel="prefetch" href="/netLearn/assets/js/35.0fa76008.js"><link rel="prefetch" href="/netLearn/assets/js/36.93d1ec74.js"><link rel="prefetch" href="/netLearn/assets/js/37.86f84e99.js"><link rel="prefetch" href="/netLearn/assets/js/38.4e6aaa80.js"><link rel="prefetch" href="/netLearn/assets/js/39.83d0b4af.js"><link rel="prefetch" href="/netLearn/assets/js/40.85e9fe2d.js"><link rel="prefetch" href="/netLearn/assets/js/41.c18e2cc3.js"><link rel="prefetch" href="/netLearn/assets/js/42.a37c9de2.js"><link rel="prefetch" href="/netLearn/assets/js/43.f8744481.js"><link rel="prefetch" href="/netLearn/assets/js/44.f0b6384a.js"><link rel="prefetch" href="/netLearn/assets/js/45.fbf3d342.js">
    <link rel="stylesheet" href="/netLearn/assets/css/0.styles.b1407e59.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/netLearn/" class="home-link router-link-active"><!----> <span class="site-name">网络协议学习</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/netLearn/" class="nav-link">首页</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/netLearn/" class="nav-link">首页</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>网络协议课程</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/netLearn/intro.html" class="sidebar-link">前言</a></li><li><a href="/netLearn/lesson1.html" class="sidebar-link">为什么要学习网络协议</a></li><li><a href="/netLearn/lesson2.html" class="sidebar-link">网络分层的真实含义</a></li><li><a href="/netLearn/lesson3.html" class="sidebar-link">ifconfig命令</a></li><li><a href="/netLearn/lesson4.html" class="sidebar-link">DHCP和PXE</a></li><li><a href="/netLearn/lesson5.html" class="sidebar-link">从物理层到MAC层</a></li><li><a href="/netLearn/lesson6.html" class="sidebar-link">交换机与VLAN</a></li><li><a href="/netLearn/lesson7.html" class="sidebar-link">ICMP与ping</a></li><li><a href="/netLearn/lesson8.html" class="sidebar-link">世界那么大，我想出网关</a></li><li><a href="/netLearn/lesson9.html" class="sidebar-link">路由协议</a></li><li><a href="/netLearn/lesson10.html" class="sidebar-link">UDP协议</a></li><li><a href="/netLearn/lesson11.html" class="sidebar-link">TCP协议上</a></li><li><a href="/netLearn/lesson12.html" class="sidebar-link">TCP协议下</a></li><li><a href="/netLearn/lesson13.html" class="sidebar-link">套接字</a></li><li><a href="/netLearn/lesson14.html" class="sidebar-link">http协议</a></li><li><a href="/netLearn/lesson15.html" class="sidebar-link">https协议</a></li><li><a href="/netLearn/lesson16.html" class="sidebar-link">流媒体协议</a></li><li><a href="/netLearn/lesson17.html" class="sidebar-link">P2P协议</a></li><li><a href="/netLearn/lesson18.html" class="sidebar-link">DNS协议</a></li><li><a href="/netLearn/lesson19.html" class="sidebar-link">HTTPDNS</a></li><li><a href="/netLearn/lesson20.html" class="sidebar-link">CDN</a></li><li><a href="/netLearn/lesson21.html" class="sidebar-link">数据中心</a></li><li><a href="/netLearn/lesson22.html" class="sidebar-link">VPN</a></li><li><a href="/netLearn/lesson23.html" class="sidebar-link">移动网络</a></li><li><a href="/netLearn/lesson24.html" class="sidebar-link">云中网络</a></li><li><a href="/netLearn/lesson25.html" class="sidebar-link">软件定义网络</a></li><li><a href="/netLearn/lesson26.html" class="active sidebar-link">云中的网络安全</a></li><li><a href="/netLearn/lesson27.html" class="sidebar-link">云中的网络 QoS</a></li><li><a href="/netLearn/lesson28.html" class="sidebar-link">云中网络的隔离</a></li><li><a href="/netLearn/lesson29.html" class="sidebar-link">容器网络</a></li><li><a href="/netLearn/lesson30.html" class="sidebar-link">容器网络之Flannel</a></li><li><a href="/netLearn/lesson31.html" class="sidebar-link">容器网络之Calico</a></li><li><a href="/netLearn/lesson32.html" class="sidebar-link">RPC协议综述</a></li><li><a href="/netLearn/lesson33.html" class="sidebar-link">基于XML的SOAP协议</a></li><li><a href="/netLearn/lesson34.html" class="sidebar-link">基于JSON的RESTful接口协议</a></li><li><a href="/netLearn/lesson35.html" class="sidebar-link">二进制类RPC协议</a></li><li><a href="/netLearn/lesson36.html" class="sidebar-link">跨语言类 RPC 协议</a></li><li><a href="/netLearn/lesson37.html" class="sidebar-link">知识串讲：用双十一的故事串起碎片的网络协议（上）</a></li><li><a href="/netLearn/lesson38.html" class="sidebar-link">知识串讲：用双十一的故事串起碎片的网络协议（中）</a></li><li><a href="/netLearn/lesson39.html" class="sidebar-link">知识串讲：用双十一的故事串起碎片的网络协议（下）</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="第-26-讲-云中的网络安全：虽然不是土豪，也需要基本安全和保障"><a href="#第-26-讲-云中的网络安全：虽然不是土豪，也需要基本安全和保障" aria-hidden="true" class="header-anchor">#</a> 第 26 讲 | 云中的网络安全：虽然不是土豪，也需要基本安全和保障</h1> <blockquote><p>2018-07-16 刘超</p></blockquote> <!----> <p>在今天的内容开始之前，我先卖个关子。文章结尾，我会放一个超级彩蛋，所以，今天的内容你一定要看到最后哦！</p> <p>上一节我们看到，做一个小区物业维护一个大家共享的环境，还是挺不容易的。如果都是自觉遵守规则的住户那还好，如果遇上不自觉的住户就会很麻烦。</p> <p>就像公有云的环境，其实没有你想的那么纯净，各怀鬼胎的黑客到处都是。扫描你的端口呀，探测一下你启动的什么应用啊，看一看是否有各种漏洞啊。这就像小偷潜入小区后，这儿看看，那儿瞧瞧，窗户有没有关严了啊，窗帘有没有拉上啊，主人睡了没，是不是时机潜入室内啊，等等。</p> <p>假如你创建了一台虚拟机，里面明明跑了一个电商应用，这是你非常重要的一个应用，你会把它进行安全加固。这台虚拟机的操作系统里，不小心安装了另外一个后台应用，监听着一个端口，而你的警觉性没有这么高。</p> <blockquote><p>虚拟机的这个端口是对着公网开放的，碰巧这个后台应用本身是有漏洞的，黑客就可以扫描到这个端口，然后通过这个后台应用的端口侵入你的机器，将你加固好的电商网站黑掉。这就像你买了一个五星级的防盗门，卡车都撞不开，但是厕所窗户的门把手是坏的，小偷从厕所里面就进来了。</p></blockquote> <p>所以对于公有云上的虚拟机，我的建议是仅仅开放需要的端口，而将其他的端口一概关闭。这个时候，你只要通过安全措施守护好这个唯一的入口就可以了。采用的方式常常是用 **ACL（Access Control List，访问控制列表）**来控制 IP 和端口。</p> <p>设置好了这些规则，只有指定的 IP 段能够访问指定的开放接口，就算有个有漏洞的后台进程在那里，也会被屏蔽，黑客进不来。在云平台上，这些规则的集合常称为 <strong>安全组</strong>。那安全组怎么实现呢？</p> <p>我们来复习一下，当一个网络包进入一台机器的时候，都会做什么事情。</p> <p>首先拿下 MAC 头看看，是不是我的。如果是，则拿下 IP 头来。得到目标 IP 之后呢，就开始进行路由判断。在路由判断之前，这个节点我们称为 <strong>PREROUTING</strong>。如果发现 IP 是我的，包就应该是我的，就发给上面的传输层，这个节点叫作 <strong>INPUT</strong>。如果发现 IP 不是我的，就需要转发出去，这个节点称为 FORWARD。如果是我的，上层处理完毕完毕后，一般会返回一个处理结果，这个处理结果会发出去，这个节点称为 OUTPUT，无论是 FORWARD 还是 <strong>OUTPUT</strong>，都是路由判断之后发生的，最后一个节点是 POSTROUTING。</p> <p>整个过程如图所示。</p> <!----> <p>整个包的处理过程还是原来的过程，只不过为什么要格外关注这五个节点呢？</p> <p>是因为在 Linux 内核中，有一个框架叫 Netfilter。它可以在这些节点插入 hook 函数。这些函数可以截获数据包，对数据包进行干预。例如做一定的修改，然后决策是否接着交给 TCP/IP 协议栈处理；或者可以交回给协议栈，那就是 ACCEPT；或者过滤掉，不再传输，就是 DROP；还有就是 QUEUE，发送给某个用户态进程处理。</p> <p>这个比较难理解，经常用在内部负载均衡，就是过来的数据一会儿传给目标地址 1，一会儿传给目标地址 2，而且目标地址的个数和权重都可能变。协议栈往往处理不了这么复杂的逻辑，需要写一个函数接管这个数据，实现自己的逻辑。</p> <p>有了这个 Netfilter 框架就太好了，你可以在 IP 转发的过程中，随时干预这个过程，只要你能实现这些 hook 函数。</p> <p>一个著名的实现，就是内核模块 <strong>ip_tables</strong>。它在这五个节点上埋下函数，从而可以根据规则进行包的处理。按功能可分为四大类：连接跟踪（conntrack）、数据包的过滤（filter）、网络地址转换（nat）和数据包的修改（mangle）。其中连接跟踪是基础功能，被其他功能所依赖。其他三个可以实现包的过滤、修改和网络地址转换。</p> <p>在用户态，还有一个你肯定知道的客户端程序 iptables，用命令行来干预内核的规则。内核的功能对应 iptables 的命令行来讲，就是 <strong>表和链</strong>的概念。</p> <!----> <p><strong>iptables</strong>的表分为四种：raw–&gt;mangle–&gt;nat–&gt;filter。这四个优先级依次降低，raw 不常用，所以主要功能都在其他三种表里实现。每个表可以设置多个链。</p> <p>filter 表处理过滤功能，主要包含三个链：</p> <ul><li><p>INPUT 链：过滤所有目标地址是本机的数据包；</p></li> <li><p>FORWARD 链：过滤所有路过本机的数据包；</p></li> <li><p>OUTPUT 链：过滤所有由本机产生的数据包。</p></li></ul> <p>nat 表主要是处理网络地址转换，可以进行 Snat（改变数据包的源地址）、Dnat（改变数据包的目标地址），包含三个链：</p> <ul><li><p>PREROUTING 链：可以在数据包到达防火墙时改变目标地址；</p></li> <li><p>OUTPUT 链：可以改变本地产生的数据包的目标地址；</p></li> <li><p>POSTROUTING 链：在数据包离开防火墙时改变数据包的源地址。</p></li></ul> <p>mangle 表主要是修改数据包，包含：</p> <ul><li><p>PREROUTING 链；</p></li> <li><p>INPUT 链；</p></li> <li><p>FORWARD 链；</p></li> <li><p>OUTPUT 链；</p></li> <li><p>POSTROUTING 链。</p></li></ul> <p>将 iptables 的表和链加入到上面的过程图中，就形成了下面的图和过程。</p> <!----> <ol><li><p>数据包进入的时候，先进 mangle 表的 PREROUTING 链。在这里可以根据需要，改变数据包头内容之后，进入 nat 表的 PREROUTING 链，在这里可以根据需要做 Dnat，也就是目标地址转换。</p></li> <li><p>进入路由判断，要判断是进入本地的还是转发的。</p></li> <li><p>如果是进入本地的，就进入 INPUT 链，之后按条件过滤限制进入。</p></li> <li><p>之后进入本机，再进入 OUTPUT 链，按条件过滤限制出去，离开本地。</p></li> <li><p>如果是转发就进入 FORWARD 链，根据条件过滤限制转发。</p></li> <li><p>之后进入 POSTROUTING 链，这里可以做 Snat，离开网络接口。</p></li></ol> <p>有了 <code>iptables</code>命令，我们就可以在云中实现一定的安全策略。例如我们可以处理前面的偷窥事件。首先我们将所有的门都关闭。</p> <div class="language- extra-class"><pre class="language-text"><code>iptables -t filter -A INPUT -s 0.0.0.0/0.0.0.0 -d X.X.X.X -j DROP
</code></pre></div><p><code>-s</code> 表示源 IP 地址段，<code>-d</code> 表示目标地址段，<code>DROP</code> 表示丢弃，也即无论从哪里来的，要想访问我这台机器，全部拒绝，谁也黑不进来。</p> <p>但是你发现坏了，<code>ssh</code>也进不来了，都不能远程运维了，可以打开一下。</p> <div class="language- extra-class"><pre class="language-text"><code>iptables -I INPUT -s 0.0.0.0/0.0.0.0 -d X.X.X.X -p tcp --dport 22 -j ACCEPT
</code></pre></div><p>如果这台机器是提供的是 web 服务，80 端口也应该打开，当然一旦打开，这个 80 端口就需要很好的防护，但是从规则角度还是要打开。</p> <div class="language- extra-class"><pre class="language-text"><code>iptables -A INPUT -s 0.0.0.0/0.0.0.0 -d X.X.X.X -p tcp --dport 80 -j ACCEPT
</code></pre></div><p>这样就搞定了，其他的账户都封死，就一个防盗门可以进出，只要防盗门是五星级的，就比较安全了。</p> <p>这些规则都可以在虚拟机里，自己安装 iptables 自己配置。但是如果虚拟机数目非常多，都要配置，对于用户来讲就太麻烦了，能不能让云平台把这部分工作做掉呢？</p> <p>当然可以了。在云平台上，一般允许一个或者多个虚拟机属于某个安全组，而属于不同安全组的虚拟机之间的访问以及外网访问虚拟机，都需要通过安全组进行过滤。</p> <!----> <p>例如图中，我们会创建一系列的网站，都是前端在 Tomcat 里面，对外开放 8080 端口。数据库使用 MySQL，开放 3306 端口。</p> <p>为了方便运维，我们创建两个安全组，将 Tomcat 所在的虚拟机放在安全组 A 里面。在安全组 A 里面，允许任意 IP 地址 0.0.0.0/0 访问 8080 端口，但是对于 ssh 的 22 端口，仅仅允许管理员网段 203.0.113.0/24 访问。</p> <p>我们将 MySQL 所在的虚拟机在安全组 B 里面。在安全组 B 里面，仅仅允许来自安全组 A 的机器访问 3306 端口，但是对于 ssh 的 22 端口，同样允许管理员网段 203.0.113.0/24 访问。</p> <p>这些安全组规则都可以自动下发到每个在安全组里面的虚拟机上，从而控制一大批虚拟机的安全策略。这种批量下发是怎么做到的呢？你还记得这幅图吗？</p> <!----> <p>两个 VM 都通过 tap 网卡连接到一个网桥上，但是网桥是二层的，两个 VM 之间是可以随意互通的，因而需要有一个地方统一配置这些 iptables 规则。</p> <p>可以多加一个网桥，在这个网桥上配置 iptables 规则，将在用户在界面上配置的规则，放到这个网桥上。然后在每台机器上跑一个 Agent，将用户配置的安全组变成 iptables 规则，配置在这个网桥上。</p> <p>安全问题解决了，iptables 真强大！别忙，iptables 除了 filter，还有 nat 呢，这个功能也非常重要。</p> <p>前面的章节我们说过，在设计云平台的时候，我们想让虚拟机之间的网络和物理网络进行隔离，但是虚拟机毕竟还是要通过物理网和外界通信的，因而需要在出物理网的时候，做一次网络地址转换，也即 nat，这个就可以用 iptables 来做。</p> <p>我们学过，IP 头里面包含源 IP 地址和目标 IP 地址，这两种 IP 地址都可以转换成其他地址。转换源 IP 地址的，我们称为 Snat；转换目标 IP 地址的，我们称为 Dnat。</p> <p>你有没有思考过这个问题，TCP 的访问都是一去一回的，而你在你家里连接 WIFI 的 IP 地址是一个私网 IP，192.168.1.x。当你通过你们家的路由器访问 163 网站之后，网站的返回结果如何能够到达你的笔记本电脑呢？肯定不能通过 192.168.1.x，这是个私网 IP，不具有公网上的定位能力，而且用这个网段的人很多，茫茫人海，怎么能够找到你呢？</p> <p>所以当你从你家里访问 163 网站的时候，在你路由器的出口，会做 Snat 的，运营商的出口也可能做 Snat，将你的私网 IP 地址，最终转换为公网 IP 地址，然后 163 网站就可以通过这个公网 IP 地址返回结果，然后再 nat 回来，直到到达你的笔记本电脑。</p> <p>云平台里面的虚拟机也是这样子的，它只有私网 IP 地址，到达外网网口要做一次 Snat，转换成为机房网 IP，然后出数据中心的时候，再转换为公网 IP。</p> <!----> <p>这里有一个问题是，在外网网口上做 Snat 的时候，是全部转换成一个机房网 IP 呢，还是每个虚拟机都对应一个机房网 IP，最终对应一个公网 IP 呢？前面也说过了，公网 IP 非常贵，虚拟机也很多，当然不能每个都有单独的机房网和公网 IP 了，于是这种 Snat 是一种特殊的 Snat，MASQUERADE（地址伪装）。</p> <p>这种方式下，所有的虚拟机共享一个机房网和公网的 IP 地址，所有从外网网口出去的，都转换成为这个 IP 地址。那又一个问题来了，都变成一个公网 IP 了，当 163 网站返回结果的时候，给谁呢，再 nat 成为哪个私网的 IP 呢？</p> <p>这就是 Netfilter 的连接跟踪（conntrack）功能了。对于 TCP 协议来讲，肯定是上来先建立一个连接，可以用“源 / 目的 IP+ 源 / 目的端口”唯一标识一条连接，这个连接会放在 conntrack 表里面。当时是这台机器去请求 163 网站的，虽然源地址已经 Snat 成公网 IP 地址了，但是 conntrack 表里面还是有这个连接的记录的。当 163 网站返回数据的时候，会找到记录，从而找到正确的私网 IP 地址。</p> <p>这是虚拟机做客户端的情况，如果虚拟机做服务器呢？也就是说，如果虚拟机里面部署的就是 163 网站呢？</p> <p>这个时候就需要给这个网站配置固定的物理网的 IP 地址和公网 IP 地址了。这时候就需要显示的配置 Snat 规则和 Dnat 规则了。</p> <p>当外部访问进来的时候，外网网口会通过 Dnat 规则将公网 IP 地址转换为私网 IP 地址，到达虚拟机，虚拟机里面是 163 网站，返回结果，外网网口会通过 Snat 规则，将私网 IP 地址转换为那个分配给它的固定的公网 IP 地址。</p> <p>类似的规则如下：</p> <ul><li><p>源地址转换 (Snat)：iptables -t nat -A -s 私网 IP -j Snat --to-source 外网 IP</p></li> <li><p>目的地址转换 (Dnat)：iptables -t nat -A -PREROUTING -d 外网 IP -j Dnat --to-destination 私网 IP</p></li></ul> <p>到此为止 iptables 解决了非法偷窥隐私的问题。</p> <h2 id="小结"><a href="#小结" aria-hidden="true" class="header-anchor">#</a> 小结</h2> <p>好了，这一节就讲到这里了，我们来总结一下。</p> <ul><li><p>云中的安全策略的常用方式是，使用 iptables 的规则，请记住它的五个阶段，PREROUTING、INPUT、FORWARD、OUTPUT、POSTROUTING。</p></li> <li><p>iptables 分为四种表，raw、mangle、nat、filter。其中安全策略主要在 filter 表中实现，而虚拟网络和物理网络地址的转换主要在 nat 表中实现。</p></li></ul> <p>最后，给你留两个思考题。</p> <ol><li><p>这一节中重点讲了 iptables 的 filter 和 nat 功能，iptables 还可以通过 QUEUE 实现负载均衡，你知道怎么做吗？</p></li> <li><p>这一节仅仅讲述了云中偷窥的问题，如果是一个合法的用户，但是不自觉抢占网络通道，应该采取什么策略呢？</p></li></ol></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/netLearn/lesson25.html" class="prev">
          软件定义网络
        </a></span> <span class="next"><a href="/netLearn/lesson27.html">
          云中的网络 QoS
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/netLearn/assets/js/22.0ecb65f5.js" defer></script><script src="/netLearn/assets/js/app.2914d2f8.js" defer></script>
  </body>
</html>
